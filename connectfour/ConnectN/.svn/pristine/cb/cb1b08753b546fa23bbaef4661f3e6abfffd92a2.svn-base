package is207.connectn.strategy;

import is207.connectn.game.strategy.minimax.NegaScout;
import java.util.HashMap;
import java.util.Set;

/**
 *
 * @author evenal
 */
public class StrategyManager
{

    private static StrategyManager instance;

    private HashMap<String, Class<? extends Strategy>> strategies;

    public static StrategyManager getInstance() {
        if (null == instance)
            instance = new StrategyManager();
        return instance;
    }

    private StrategyManager() {
        strategies = new HashMap<>();

        register("Random", RandomStrategy.class);
        register("Blocking", BlockingStrategy.class);
        register("NegaScout", NegaScout.class);
        register("NegaScout2", NegaScout2.class);

//        register("Oddvar", OT.class);
//        register("GlennVsEirik", BeatEirikStrategy.class);
//        register("GlennDefensive", GGBalancedDefensiveStrategy.class);
//        register("GlennLearningDefensive", GGThreadedLearningDefensiveStrategy.class);
//        register("Eirik", EirikStrategy.class);
//        register("EirikBackend", EirikStrategyBackend.class);
//        register("OlePetter", AlphaBeta.class);
//        register("Thananchai", Thananchai.class);
//        register("BestStrategyEU", BestStrategyEU.class);
//        register("MinimaxStrategy", MinimaxStrategy.class);
//        register("Tulling", Tulling.class);
//        register("LoserButWho", LoserButWho.class);
    }

    public void register(String name, Class<? extends Strategy> strategy) {
        strategies.put(name, strategy);
    }

    public Class<? extends Strategy> getStrategy(String name) {
        return strategies.get(name);
    }

    public Strategy getStrategyInstance(String name)
            throws InstantiationException, IllegalAccessException {
        Class<? extends Strategy> strategy = getStrategy(name);
        Strategy instance = strategy.newInstance();
        instance.name = name;
        return instance;
    }

    public String[] getNames() {
        Set<String> keys = strategies.keySet();
        return keys.toArray(new String[0]);
    }
}
